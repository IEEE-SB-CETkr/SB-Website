---
import Layout from "../layouts/Layout.astro";
import Header from "../components/Header.astro";
import Footer from "../components/Footer.astro";
import MemberCard from "../components/MemberCard.astro";
import { execomMembers } from "../data/execom";

// Page Metadata
const title = "Executive Committee | IEEE SB CETKR";
const description =
  "Meet the dedicated team behind IEEE Student Branch at College of Engineering Trikarpur";

// Helper to safely aggregate members from multiple roles
const getMembers = (roles: string[]) =>
  roles.flatMap((role) => execomMembers[role] || []);

// Data Preparation
const leadership = [
  ...(execomMembers["Branch Counselor"] || []),
  ...(execomMembers["Chairperson"] || []),
  ...(execomMembers["Vice Chairperson"] || []),
  ...(execomMembers["Secretary"]?.slice(0, 1) || []), // Safely get first secretary
];

const coreTeam = getMembers([
  "Joint Secretary",
  "Treasurer",
  "Webmasters",
  "Event Coordinators",
  "ECC",
  "Membership Development Coordinator",
  "Media",
  "Design Lead",
  "Content Lead",
  "IEEE Link Representative",
]);

const chapterLeads = getMembers([
  "IEEE PES Chair",
  "IEEE PES Vice Chair",
  "Women in Power",
  "IEEE IAS Chair",
  "IEEE IAS Vice Chair",
  "IEEE WIE Chair",
  "IEEE WIE Vice Chair",
]);

// Section Configuration for Rendering
const sections = [
  {
    title: "Leadership",
    color: "cyan-400",
    shadow: "rgba(34,211,238,0.5)",
    members: leadership,
  },
  {
    title: "Core Team",
    color: "blue-500",
    shadow: "rgba(59,130,246,0.5)",
    members: coreTeam,
  },
  {
    title: "Chapter Leads",
    color: "purple-500",
    shadow: "rgba(168,85,247,0.5)",
    members: chapterLeads,
  },
];
---

<Header />
<Layout title={title} description={description}>
  <section class="relative pt-32 pb-20 bg-slate-950 overflow-hidden">
    <div class="absolute inset-0 opacity-20 pointer-events-none">
      <div
        class="absolute inset-0 bg-[url('/images/grid.svg')] [mask-image:linear-gradient(180deg,white,rgba(255,255,255,0))]"
      >
      </div>
    </div>
    <div
      class="absolute top-0 right-0 -mr-20 -mt-20 w-96 h-96 bg-cyan-500/10 rounded-full blur-3xl pointer-events-none"
    >
    </div>
    <div
      class="absolute bottom-0 left-0 -ml-20 -mb-20 w-96 h-96 bg-blue-600/10 rounded-full blur-3xl pointer-events-none"
    >
    </div>

    <div class="container mx-auto px-6 relative z-10 text-center">
      <h1
        class="text-4xl md:text-5xl lg:text-6xl font-bold text-white mb-6 tracking-tight"
      >
        Meet Our <span
          class="bg-gradient-to-r from-cyan-400 to-blue-500 bg-clip-text text-transparent"
          >Executive Committee</span
        >
      </h1>
      <div
        class="w-24 h-1.5 bg-gradient-to-r from-cyan-400 to-blue-500 mx-auto rounded-full mb-8 shadow-[0_0_15px_rgba(34,211,238,0.5)]"
      >
      </div>
      <p
        class="text-lg md:text-xl text-slate-300 mb-8 max-w-2xl mx-auto leading-relaxed"
      >
        The passionate leaders and visionaries driving innovation, fostering
        technical excellence, and building a vibrant community at IEEE SB CETKr.
      </p>
    </div>
  </section>

  <div class="bg-slate-950 pb-20">
    <div class="container mx-auto px-6 space-y-24">
      {
        sections.map((section) => (
          <section class="relative">
            <div class="flex items-center justify-center mb-12">
              <h2 class="text-3xl font-bold text-white flex items-center gap-3">
                <span
                  class={`w-2 h-8 bg-${section.color} rounded-full`}
                  style={`box-shadow: 0 0 15px ${section.shadow}`}
                />
                {section.title}
              </h2>
            </div>

            <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-8 justify-items-center">
              {section.members.map((member) => (
                <div class="w-full max-w-sm h-full">
                  <MemberCard member={member} />
                </div>
              ))}
            </div>
          </section>
        ))
      }
    </div>
  </div>
</Layout>
<Footer />
