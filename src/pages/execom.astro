---
import Layout from "../layouts/Layout.astro";
import Header from "../components/Header.astro";
import Footer from "../components/Footer.astro";
import MemberCard from "../components/MemberCard.astro";
import { execomMembers } from "../data/execom";

// Page Metadata
const title = "Executive Committee | IEEE SB CETKR";
const description =
  "Meet the dedicated team behind IEEE Student Branch at College of Engineering Trikarpur";

// Helper to safely aggregate members from multiple roles
const getMembers = (roles: string[]) =>
  roles.flatMap((role) => execomMembers[role] || []);

// Data Preparation
const leadership = [
  ...(execomMembers["Branch Counselor"] || []),
  ...(execomMembers["Chairperson"] || []),
  ...(execomMembers["Vice Chairperson"] || []),
  ...(execomMembers["Secretary"]?.slice(0, 1) || []), // Safely get first secretary
];

const coreTeam = getMembers([
  "Joint Secretary",
  "Treasurer",
  "Webmasters",
  "Event Coordinators",
  "ECC",
  "Membership Development Coordinator",
  "Media",
  "Design Lead",
  "Content Lead",
  "IEEE Link Representative",
]);

const chapterLeads = getMembers([
  "IEEE PES Chair",
  "IEEE PES Vice Chair",
  "Women in Power",
  "IEEE IAS Chair",
  "IEEE IAS Vice Chair",
  "IEEE WIE Chair",
  "IEEE WIE Vice Chair",
]);

// Section Configuration for Rendering
const sections = [
  {
    title: "Leadership",
    color: "cyan-400",
    shadow: "rgba(34,211,238,0.5)",
    members: leadership,
  },
  {
    title: "Core Team",
    color: "blue-500",
    shadow: "rgba(59,130,246,0.5)",
    members: coreTeam,
  },
  {
    title: "Chapter Leads",
    color: "purple-500",
    shadow: "rgba(168,85,247,0.5)",
    members: chapterLeads,
  },
];
---

<Header />
<Layout title={title} description={description}>
  <section class="relative pt-40 pb-20 overflow-hidden">
    <div class="absolute inset-0 z-0">
      <div
        class="absolute inset-0 bg-[url('/images/grid.svg')] opacity-10 [mask-image:linear-gradient(180deg,white,rgba(255,255,255,0))]"
      >
      </div>
    </div>

    <div class="container mx-auto px-6 relative z-10 text-center">
      <div data-aos="fade-down" data-aos-duration="1000">
        <span
          class="inline-block px-4 py-1.5 rounded-full border border-cyan-500/30 bg-cyan-500/10 text-cyan-300 text-sm font-medium mb-6 backdrop-blur-sm"
        >
          Our Team
        </span>
      </div>

      <h1
        class="text-4xl md:text-6xl font-bold text-white mb-6 tracking-tight"
        data-aos="fade-up"
        data-aos-duration="1000"
        data-aos-delay="100"
      >
        Executive <span class="gradient-text font-extrabold">Committee</span>
      </h1>

      <p
        class="text-lg md:text-xl text-slate-300 mb-10 max-w-2xl mx-auto leading-relaxed"
        data-aos="fade-up"
        data-aos-duration="1000"
        data-aos-delay="200"
      >
        The passionate leaders and visionaries driving innovation, fostering
        technical excellence, and building a vibrant community at IEEE SB CETKr.
      </p>
    </div>
  </section>

  <div class="bg-slate-950 pb-20">
    <div class="container mx-auto px-6 space-y-24">
      {
        sections.map((section) => (
          <section class="relative">
            <div class="flex items-center justify-center mb-12">
              <h2 class="text-3xl font-bold text-white flex items-center gap-3">
                <span
                  class={`w-2 h-8 bg-${section.color} rounded-full`}
                  style={`box-shadow: 0 0 15px ${section.shadow}`}
                />
                {section.title}
              </h2>
            </div>

            <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-8 justify-items-center">
              {section.members.map((member) => (
                <div class="w-full max-w-sm h-full">
                  <MemberCard member={member} />
                </div>
              ))}
            </div>
          </section>
        ))
      }
    </div>
  </div>
</Layout>
<Footer />
